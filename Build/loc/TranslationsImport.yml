# ==================================================================================
# Pipeline for VsCodeExtension-Localization build definition
# Gets translated files from VSCodeExt and creates a PR for vscode-cpptools
#
# Triggered only by daily schedule
# ==================================================================================

resources:
  repositories:
  - repository: self
    clean: true

trigger: none

pool:
  vmImage: 'windows-latest'

steps:
- checkout: self
- checkout: https://$(OneLocBuildPat)@ceapex.visualstudio.com/CEINTL/_git/VSCodeExt

- task: CmdLine@2
  inputs:
    script: 'pushd && cd $(Build.SourcesDirectory)/vscode-cpptools/Extension && node ./translations_auto_pr.js microsoft vscode-cpptools cpptools csigs $(csigsPat) $(Build.SourcesDirectory)/VSCodeExt && popd'
